<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Theme Accessibility Analyzer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .theme-analysis {
            border: 1px solid #ccc;
            margin: 20px 0;
            padding: 20px;
            border-radius: 8px;
            background: #f9f9f9;
        }
        .color-box {
            display: inline-block;
            width: 40px;
            height: 40px;
            margin-right: 10px;
            border: 1px solid #333;
            vertical-align: middle;
        }
        .ratio {
            font-weight: bold;
            margin: 5px 0;
        }
        .pass { color: #008000; }
        .fail { color: #cc0000; }
        .warning { color: #ff8800; }
        .theme-preview {
            padding: 15px;
            margin: 10px 0;
            border-radius: 4px;
            color: white;
        }
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
    </style>
</head>
<body>
    <h1>WCAG AA Accessibility Analysis for New Themes</h1>
    
    <div id="results"></div>

    <script>
        // Function to convert hex to RGB
        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : null;
        }

        // Function to calculate relative luminance
        function getLuminance(rgb) {
            const { r, g, b } = rgb;
            
            // Convert to 0-1 range
            const rs = r / 255;
            const gs = g / 255;
            const bs = b / 255;
            
            // Apply gamma correction
            const rLin = rs <= 0.03928 ? rs / 12.92 : Math.pow((rs + 0.055) / 1.055, 2.4);
            const gLin = gs <= 0.03928 ? gs / 12.92 : Math.pow((gs + 0.055) / 1.055, 2.4);
            const bLin = bs <= 0.03928 ? bs / 12.92 : Math.pow((bs + 0.055) / 1.055, 2.4);
            
            // Calculate luminance
            return 0.2126 * rLin + 0.7152 * gLin + 0.0722 * bLin;
        }

        // Function to calculate contrast ratio
        function getContrastRatio(color1, color2) {
            const rgb1 = hexToRgb(color1);
            const rgb2 = hexToRgb(color2);
            
            const lum1 = getLuminance(rgb1);
            const lum2 = getLuminance(rgb2);
            
            const lighter = Math.max(lum1, lum2);
            const darker = Math.min(lum1, lum2);
            
            return (lighter + 0.05) / (darker + 0.05);
        }

        // Function to get compliance status
        function getComplianceStatus(ratio, minRatio = 4.5) {
            if (ratio >= 7) return { status: 'AAA', class: 'pass' };
            if (ratio >= minRatio) return { status: 'AA', class: 'pass' };
            if (ratio >= 3) return { status: 'Fail (Close)', class: 'warning' };
            return { status: 'Fail', class: 'fail' };
        }

        // Theme definitions
        const themes = [
            { name: "Silver Mist", background: "#84828F", text: "#FFFFFF", primary: "#2C3D55" },
            { name: "Nebula Blue", background: "#536271", text: "#F0F0F2", primary: "#84828F" },
            { name: "Moonlight Silver", background: "#CCC9DC", text: "#0C1821", primary: "#1B2A41" },
            { name: "Soft Lavender", background: "#FEEAFA", text: "#3E3548", primary: "#8E9AAF" },
            { name: "Coral Dawn", background: "#B76D68", text: "#FFFFFF", primary: "#121420" },
            { name: "Purple Slate", background: "#8E9AAF", text: "#FEEAFA", primary: "#DEE2FF" },
            { name: "Gunmetal Gray", background: "#403F4C", text: "#F5F5F5", primary: "#B76D68" },
            { name: "Ink Black", background: "#0C1821", text: "#F0F0F5", primary: "#324A5F" },
            { name: "Midnight Depths", background: "#2C3D55", text: "#E8E8EA", primary: "#84828F" },
            { name: "Midnight Steel", background: "#121420", text: "#F0F0F0", primary: "#B76D68" }
        ];

        // Analyze themes
        function analyzeThemes() {
            const resultsContainer = document.getElementById('results');
            
            themes.forEach(theme => {
                const bgToTextRatio = getContrastRatio(theme.background, theme.text);
                const bgToPrimaryRatio = getContrastRatio(theme.background, theme.primary);
                const textToPrimaryRatio = getContrastRatio(theme.text, theme.primary);
                
                const bgToTextStatus = getComplianceStatus(bgToTextRatio);
                const bgToPrimaryStatus = getComplianceStatus(bgToPrimaryRatio, 3); // Lower threshold for UI elements
                const textToPrimaryStatus = getComplianceStatus(textToPrimaryRatio);

                const themeDiv = document.createElement('div');
                themeDiv.className = 'theme-analysis';
                
                themeDiv.innerHTML = `
                    <h3>${theme.name}</h3>
                    
                    <div class="theme-preview" style="background-color: ${theme.background}; color: ${theme.text};">
                        Sample text in this theme
                        <span style="color: ${theme.primary}; font-weight: bold;">[Primary Color Element]</span>
                    </div>
                    
                    <div style="margin: 15px 0;">
                        <div><span class="color-box" style="background-color: ${theme.background};"></span>Background: ${theme.background}</div>
                        <div><span class="color-box" style="background-color: ${theme.text};"></span>Text: ${theme.text}</div>
                        <div><span class="color-box" style="background-color: ${theme.primary};"></span>Primary: ${theme.primary}</div>
                    </div>
                    
                    <div class="ratio">
                        <strong>Background to Text:</strong> 
                        <span class="${bgToTextStatus.class}">${bgToTextRatio.toFixed(2)}:1 - ${bgToTextStatus.status}</span>
                        ${bgToTextRatio >= 4.5 ? '✓' : '✗'}
                    </div>
                    
                    <div class="ratio">
                        <strong>Background to Primary:</strong> 
                        <span class="${bgToPrimaryStatus.class}">${bgToPrimaryRatio.toFixed(2)}:1 - ${bgToPrimaryStatus.status}</span>
                        ${bgToPrimaryRatio >= 3 ? '✓' : '✗'}
                    </div>
                    
                    <div class="ratio">
                        <strong>Text to Primary:</strong> 
                        <span class="${textToPrimaryStatus.class}">${textToPrimaryRatio.toFixed(2)}:1 - ${textToPrimaryStatus.status}</span>
                        ${textToPrimaryRatio >= 3 ? '✓' : '✗'}
                    </div>
                    
                    <div style="margin-top: 15px;">
                        <strong>WCAG AA Compliance:</strong> 
                        <span class="${bgToTextRatio >= 4.5 && bgToPrimaryRatio >= 3 ? 'pass' : 'fail'}">
                            ${bgToTextRatio >= 4.5 && bgToPrimaryRatio >= 3 ? 'PASS' : 'FAIL'}
                        </span>
                    </div>
                    
                    ${generateRecommendations(theme, bgToTextRatio, bgToPrimaryRatio, textToPrimaryRatio)}
                `;
                
                resultsContainer.appendChild(themeDiv);
            });
        }

        function generateRecommendations(theme, bgToTextRatio, bgToPrimaryRatio, textToPrimaryRatio) {
            let recommendations = [];
            
            if (bgToTextRatio < 4.5) {
                recommendations.push("• Text contrast insufficient - consider darker text or lighter background");
            }
            
            if (bgToPrimaryRatio < 3) {
                recommendations.push("• Primary color contrast too low - consider adjusting primary color brightness");
            }
            
            if (textToPrimaryRatio < 3) {
                recommendations.push("• Text to primary contrast could be improved for better UI element visibility");
            }
            
            if (recommendations.length === 0) {
                recommendations.push("• All contrast ratios meet or exceed WCAG AA standards ✓");
            }
            
            return `
                <div style="margin-top: 10px;">
                    <strong>Recommendations:</strong>
                    <div style="margin-left: 10px;">
                        ${recommendations.join('<br>')}
                    </div>
                </div>
            `;
        }

        // Run analysis when page loads
        window.onload = analyzeThemes;
    </script>
</body>
</html>